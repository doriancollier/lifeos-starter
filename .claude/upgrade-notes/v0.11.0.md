# Upgrade Notes: v0.11.0

## Summary
Major architecture overhaul: vault content moved to `workspace/`, new infrastructure directories for background tasks, integrations, and multi-channel gateway (future).

## User Action Required

- [ ] Re-open Obsidian and point it to `workspace/` folder (not root)
- [ ] Verify your daily notes work: run `/daily:plan`
- [ ] If you have custom scripts referencing vault paths, update them to use `workspace/`

## Breaking Changes

### Vault Location Changed
- **Old**: All vault content at repository root (`0-System/`, `4-Daily/`, etc.)
- **New**: All vault content under `workspace/` (`workspace/0-System/`, `workspace/4-Daily/`, etc.)
- **Migration**: Automatic. Obsidian must be pointed at `workspace/` folder.

### VAULT_ROOT Environment Variable
- If you set `OBSIDIAN_VAULT_ROOT`, it should now point to `workspace/`
- Hooks automatically detect this if variable is not set

### New Root-Level Directories
These new directories are part of the infrastructure layer:

| Directory | Purpose | User Action |
|-----------|---------|-------------|
| `integrations/` | Data connectors (health, email, meetings) | None - system managed |
| `tasks/` | Background processes (heartbeat) | None - system managed |
| `data/` | Imported external data | None - populated by integrations |
| `state/` | Ephemeral runtime (logs, cache) | None - auto-managed |
| `extensions/` | Your custom plugins | Place your customizations here |
| `gateway/` | API server (future) | Not yet implemented |
| `scripts/` | Build/install scripts | None - system managed |

## New Features to Explore

- **Upgrade Notes** (this system!) - AI now receives guidance during upgrades
- **Infrastructure Layer** - Foundation for background tasks and multi-channel access
- **Extensions Directory** - Place for user customizations that won't be overwritten
- **Heartbeat System** - Background vault health monitoring (`/heartbeat:status`)

## Configuration Changes

None required. All paths in hooks, skills, and commands were updated automatically.

## Verification

1. Start a new Claude Code session - no hook errors should appear
2. Run `/daily:plan` - daily note should be created in `workspace/4-Daily/`
3. Open Obsidian with `workspace/` as the vault - all notes should be accessible
4. Check new directories exist: `ls -la` should show integrations/, tasks/, data/, state/, extensions/

## Notes for AI

- If user reports "file not found" errors, check if paths include `workspace/`
- If user's Obsidian is empty, guide them to re-open with `workspace/` as vault
- The git history was preserved using `git mv` - history should be traceable
- User customizations should go in `extensions/` not `.claude/` to survive upgrades
- `data/` contains imported data from external sources - don't modify directly
- `state/` is ephemeral - can be deleted without data loss
